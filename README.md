# 🚀✨ 趋于自助商城系统 (QuYuShop) 🌟💫

一款现代化的自助商城系统，为你的商品销售提供完整解决方案。 ✨🎯

### ✨ 核心功能
- 🛒 **商品管理**：支持多分类商品管理，库存实时监控，灵活定价 📊
- 💳 **在线支付**：集成易支付接口，支持多种支付渠道，交易安全便捷 🔒
- 📦 **自动发货**：支持卡密自动发货，交易完成即时到账，无需人工干预 ⚡
- 👤 **用户系统**：完善的用户注册、登录和订单管理，提升用户体验 ✨
- 🔔 **通知系统**：支持Telegram机器人实时订单通知，及时处理交易 📱
- 🛡️ **安全保障**：验证码保护、密码加密存储、权限控制，保障系统安全 🔐
- 📊 **数据统计**：销售额统计、订单分析、访问量记录，助力经营决策 📈
- 📱 **响应式设计**：自适应布局，完美兼容手机、平板和电脑等各种设备 💻

## 🚀 部署指南

### 💻 环境要求
- 🖥️ CentOS 7+ 服务器 🎯
- 🔧 宝塔面板或者aaPanel面板 🛠️
- 🐍 Python 3.6.8+ 🎨
- 🗄️ MySQL 5.7+ 📚

### 📦 部署步骤

#### 🔧 1. 宝塔面板或者aaPanel面板基础配置 ⚙️

1. **🌐 创建网站** 🎉
   - 进入宝塔面板或者aaPanel面板 → 网站 → 添加站点
   - 填写域名、选择PHP版本（不需要选择）
   - 创建数据库并记住数据库名、用户名和密码

2. **📤 上传代码** 📂
   - 进入网站目录：`/www/wwwroot/你的站点目录`
   - 上传项目压缩包 `QuYuShop.zip` 并解压

3. **⚙️ 修改配置文件** 🛠️
   - 编辑 `.env` 文件填入你自己的信息
   ```
   # 应用密钥
   SECRET_KEY=随机字符串
   
   # 数据库连接
   DATABASE_URL=mysql+pymysql://你的数据库用户名:你的数据库密码@localhost/你的数据库名?charset=utf8mb4
   
   # 管理员账号
   ADMIN_USERNAME=admin
   ADMIN_PASSWORD=123456
   
   # 上传目录
   UPLOAD_FOLDER=uploads
   ```

#### 🐍 2. 配置Python环境 🎨

> 📝 注意：CentOS已预装 `Python3.6.8` 和 `pip 9.0.3` 环境 ✅

1. **🔍 检查Python版本** 🔎
   ```bash
   python3 --version
   ```

2. **🔍 检查pip3版本** 🔎
   ```bash
   pip3 --version
   ```

#### 🔮 3. 创建虚拟环境

1. **📂 打开终端进入站点目录**
   ```bash
   cd /www/wwwroot/你的站点目录
   ```
   
   给系统中所有Python相关的程序添加可执行权限
   ```bash
   sudo chmod -R 755 /usr/bin/python*
   ```
   
3. **🏗️ 创建虚拟环境**
   ```bash
   python3 -m venv 环境名称
   例如：
   python3 -m venv myenv
   ```
   
4. **🚀 激活虚拟环境**
   ```bash
   source myenv/bin/activate
   ```

5. **📦 安装项目依赖**
   ```bash
   pip3 install -r requirements.txt
   ```

#### 🗄️ 4. 初始化与启动

1. **🔧 初始化数据库**
   ```bash
   python3 init_db.py
   # 当提示确认时，输入y并回车
   ```

2. **▶️ 启动应用**
   ```bash
   # 后台运行应用
   nohup python3 run.py > web.log 2>&1 &
   
   # 查看应用是否成功启动
   ps aux | grep "python3 run.py"
   ```

#### 🌐 5. 配置站点

1. **🔄 设置反向代理**
   - 进入宝塔面板 → 网站 → 设置 → 反向代理
   - 添加反向代理：
     - 代理名称：QuYuShop
     - 目标URL：http://127.0.0.1:5000

2. **🔒 配置防火墙**
   - 进入宝塔面板 → 安全 → 防火墙
   - 放行5000端口：
     - 端口：5000
     - 协议：TCP
     - 备注：Flask应用

## 🖥️ 访问系统

- **🏠 前台访问**：`http://你的域名`
- **🔐 后台访问**：`http://你的域名/admin`
- **👤 默认管理员账号**：在`.env`文件中设置的ADMIN_USERNAME和ADMIN_PASSWORD

## ❓ 常见问题

### 🔍 1. 无法访问网站
- ✅ 检查Flask应用是否正在运行：`ps aux | grep "python3 run.py"`
- ✅ 检查防火墙是否放行5000端口
- ✅ 检查反向代理配置是否正确
- ✅ 查看日志文件：`tail -f web.log`

### 🖼️ 2. 上传图片失败
- ✅ 确保上传目录有适当权限：
  ```bash
  chmod -R 755 /www/wwwroot/你的站点目录/app/static/uploads
  # 这个命令设置目录权限为755，表示：
  # 所有者（owner）有读、写、执行权限
  # 组（group）和其他人（others）有读和执行权限，但没有写权限
  # -R 表示递归设置，即目录及其所有子目录和文件都应用此权限
  ```

### 🔄 3. 重启应用
```bash
# 进入你的网站目录
cd /www/wwwroot/你的站点目录

# 查找当前运行的应用进程
ps aux | grep "python3 run.py"

# 终止进程（PID为进程ID，请替换为实际值）
kill -9 PID

# 重新启动应用
# 先激活虚拟环境
source myenv/bin/activate
nohup python3 run.py > web.log 2>&1 &
```

## 📖 使用文档

### 👨‍💻 管理员操作指南

#### 🔐 登录后台
1. 访问 `http://你的域名/admin`
2. 输入在 `.env` 文件中设置的管理员账号和密码

#### 🛒 商品管理
1. **添加商品**
   - 点击「商品管理」→「添加商品」
   - 填写商品名称、价格、描述等信息
   - 上传商品图片
   - 添加卡密信息
2. **编辑商品**
   - 点击「商品管理」→ 选择需要编辑的商品
   - 点击「编辑」按钮
   - 修改相关信息后保存
3. **删除商品**
   - 点击「商品管理」→ 选择需要删除的商品
   - 点击「删除」按钮
   - 确认删除操作

#### 💰 订单管理
1. **查看订单**
   - 点击「订单管理」查看所有订单
   - 可按状态筛选（待付款/已付款/已完成/已取消）
2. **处理订单**
   - 可修改订单状态
   - 可添加备注信息

#### 📊 数据统计
- 查看销售额、订单量等统计数据
- 支持按日期范围筛选
- 提供图表可视化展示

### 🙋 用户使用指南

#### 🛍️ 购买流程
1. 浏览商品列表，选择需要购买的商品
2. 点击商品进入详情页
3. 设置购买数量，点击「立即购买」
4. 确认订单信息，填写联系方式
5. 选择支付方式完成支付
6. 支付成功后自动获取卡密信息

#### 👤 个人中心
- 查看历史订单
- 管理个人信息
- 查看卡密信息

## 📋 更新日志

### ✨ v1.0.0 (2025-03-11)
- 🌟 首次发布
- 🛒 商品管理系统
  - 支持商品分类管理
  - 支持商品库存管理
  - 支持商品上下架控制
- 💳 多种支付方式
  - 支持易支付接口
  - 支持支付宝、微信支付、QQ钱包等多种支付渠道
- 👤 用户管理系统
  - 用户注册与登录
  - 用户订单管理
  - 用户权限控制
- 📊 数据统计与分析
  - 订单统计
  - 销售额统计
  - 页面访问统计
- 🔔 订单通知功能
  - 支持Telegram机器人通知
  - 订单状态实时更新
- 🖼️ 图片上传功能
  - 支持本地图片上传
  - 支持远程图片URL导入
- 📱 响应式设计
  - 完美适配手机、平板和电脑等各种设备
- 🔍 搜索功能
  - 商品搜索
  - 订单搜索
- 🌐 系统设置
  - 站点信息配置
  - 支付接口配置
  - 联系方式配置
- 🔄 定时任务
  - 订单过期自动处理
  - 缓存自动清理
- 🛡️ 安全功能
  - 验证码保护
  - 密码加密存储
  - 权限控制

## 🤝 联系方式与社群

### 📱 Telegram 社群
- 📢 官方频道：[@QUYUkjpd](https://t.me/QUYUkjpd)
- 👥 交流群：[@QUYUkjq](https://t.me/QUYUkjq)
- 👨‍💻 作者：[@Lawofforce](https://t.me/Lawofforce)

> 💫 欢迎加入我们的社群，获取最新更新和技术支持！ ✨

## 💝 赞助支持

如果觉得这个系统对你有帮助，欢迎赞助支持！ 🙏

### 💎 TRC20-USDT 钱包地址
```
TQ2gs6167orQSVWVNHWrKq9SZ8a5WRETZs
```
👆 点击上方复制按钮即可复制

<img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=TQ2gs6167orQSVWVNHWrKq9SZ8a5WRETZs" alt="TRC20-USDT 二维码" width="200"/>

> 🌟 您的支持是我们持续改进的动力！ ✨

## ⚠️ 免责声明

🔒 本系统仅供学习交流使用，请勿用于非法用途。使用本系统所产生的一切后果由使用者自行承担。
